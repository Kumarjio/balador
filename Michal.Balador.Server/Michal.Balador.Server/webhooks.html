<!DOCTYPE html>
<html>
<head>
    <title></title>
    <link rel="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" />
	<meta charset="utf-8" /><script src="https://code.jquery.com/jquery-1.12.4.min.js"
        integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ="
        crossorigin="anonymous"></script>
</head>
<body>

    <div class="jumbotron">
        <h1>ASP.NET</h1>
        <p class="lead">.</p>
        <p><a href="http://asp.net" class="btn btn-primary btn-lg">Learn more &raquo;</a></p>
    </div>
    <form onsubmit="return subscribe()">
        Subscribe to all events <input type="submit" value="submit">
    </form>
    <form onsubmit="return unsubscribe()">
        Unsubscribe from all events <input type="submit" value="submit">
    </form>
    <form onsubmit="return notifymvc()">
        Trigger notification through MVC controller <input type="submit" value="submit">
    </form>
    <form onsubmit="return notifyapi()">
        Trigger notification through Web API controller <input type="submit" value="submit">
    </form>
    <script>

        function subscribe() {
            debugger;
            var access_token = "bearer vuq3O-F3e4m7NsZkfQw4zDYbiZ27nIzQRVivicWCVgvh7zvb0cn1MwMV3c4PLvUtaRy3sMbPllnXAIQhlA5EiTJi9NmfjWtFxZn8NYBhRjs-jai2NaBqGH1_DkPgbnTjKrVi9IO9J1p2WDMAHqN5Dj4JVuWczzx-Jyvf7pd-jLl4SY5orGU-QZvW8mka9qf0GBqxwnB2DqFN60tT7I3Awxwsovv2GQiNKHtLXtY7IRTPOS4NY07ReAyG8OATVMzEKskxRjTndtz4TleH9ezUWTOR02sP5pMVHcWuXaDr59n-Z51hqm2Fba3eZCNFZzfzz-DrKfKv9oBp8BcH_t9tBlL8jehkRGhe_G9jRwk6xwg_600sWskN4vPb9GDtJ3tKd1ftoM5P1PUNXA_r750ZP5mF53RxqNdyZr6GokJdkJAvPfxqU0XFO4WIFobDQdq8tvvobt9VQQZG7fWJcUWfjODsKmu-hWkZSC2jdey5874qGn2eDjwLVg1oVkQGZo_GYT3L5qtgiz04wFzp7fe3bs7Sxrli-2liW6rtgMWlcGLHxvPbdRtobebO8lOHqDf6";

            $.ajax({
                type: "POST",
                url: "/api/webhooks/registrations",
                data: JSON.stringify({
                    WebHookUri: "http://localhost:1910/api/TestEmail",
                    Secret: "12345678901234567890123456789012",
                    Description: "My first WebHook!"
                }),
                headers: { "Authorization": access_token },
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (data, status) {
                    debugger;
                    alert(data.Message ? data.Message : status);
                },
                error: function (errMsg) {
                    debugger;
                    alert(errMsg.responseJSON.Message);
                }
            });
            return false;
        }
function unsubscribe() {
    $.ajax({
        url: "/api/webhooks/registrations",
        type: 'DELETE',
        success: function (data, status) { alert(data.Message ? data.Message : status); },
        error: function (errMsg) { alert(errMsg.responseJSON.Message); }
    });
    return false;
}

function notifymvc() {
    $.post("/notify/submit",
    { },
    function (data, status) { alert("Data: " + data + "\nStatus: " + status); });
    return false;
}

function notifyapi() {
    $.post("/api/notifyapi",
    { },
    function (data, status) { alert("Data: " + data + "\nStatus: " + status); });
    return false;
}
    </script>
    <div class="row">
        <div class="col-md-4">
            <h2>Getting started</h2>
            <p>
                ASP.NET MVC gives you a powerful, patterns-based way to build dynamic websites that
                enables a clean separation of concerns and gives you full control over markup
                for enjoyable, agile development.
            </p>
            <p><a class="btn btn-default" href="http://go.microsoft.com/fwlink/?LinkId=301865">Learn more &raquo;</a></p>
        </div>
        <div class="col-md-4">
            <h2>Get more libraries</h2>
            <p>NuGet is a free Visual Studio extension that makes it easy to add, remove, and update libraries and tools in Visual Studio projects.</p>
            <p><a class="btn btn-default" href="http://go.microsoft.com/fwlink/?LinkId=301866">Learn more &raquo;</a></p>
        </div>
        <div class="col-md-4">
            <h2>Web Hosting</h2>
            <p>You can easily find a web hosting company that offers the right mix of features and price for your applications.</p>
            <p><a class="btn btn-default" href="http://go.microsoft.com/fwlink/?LinkId=301867">Learn more &raquo;</a></p>
        </div>
    </div>
</body>
</html>
